<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="You know nothing"><title>go-mysql-driver dataSourceName可选参数 | Carl</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">go-mysql-driver dataSourceName可选参数</h1><a id="logo" href="/.">Carl</a><p class="description">You know nothing</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 文章列表</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">go-mysql-driver dataSourceName可选参数</h1><div class="post-meta">May 17, 2018<span> | </span><span class="category"><a href="/categories/DB/">DB</a></span></div><a class="disqus-comment-count" data-disqus-identifier="2018/05/17/go-mysql-driver-data-source-name/" href="/2018/05/17/go-mysql-driver-data-source-name/#disqus_thread"></a><div class="post-content"><h3 id="DSN-Data-Source-Name"><a href="#DSN-Data-Source-Name" class="headerlink" title="DSN (Data Source Name)"></a>DSN (Data Source Name)</h3><p>The Data Source Name has a common format, like e.g. <a href="http://pear.php.net/manual/en/package.database.db.intro-dsn.php" target="_blank" rel="noopener">PEAR DB</a> uses it, but without type-prefix (optional parts marked by squared brackets):<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[username[:password]@][protocol[(address)]]/dbname[?param1=value1&amp;...&amp;paramN=valueN]</span><br></pre></td></tr></table></figure></p>
<p>A DSN in its fullest form:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username:password@protocol(address)/dbname?param=value</span><br></pre></td></tr></table></figure></p>
<p>Except for the databasename, all values are optional. So the minimal DSN is:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/dbname</span><br></pre></td></tr></table></figure></p>
<p>If you do not want to preselect a database, leave <code>dbname</code> empty:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/</span><br></pre></td></tr></table></figure></p>
<p>This has the same effect as an empty DSN string:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>Alternatively, <a href="https://godoc.org/github.com/go-sql-driver/mysql#Config.FormatDSN" target="_blank" rel="noopener">Config.FormatDSN</a> can be used to create a DSN string by filling a struct.</p>
<h4 id="Password"><a href="#Password" class="headerlink" title="Password"></a>Password</h4><p>Passwords can consist of any character. Escaping is <strong>not</strong> necessary.</p>
<h4 id="Protocol"><a href="#Protocol" class="headerlink" title="Protocol"></a>Protocol</h4><p>See <a href="https://golang.org/pkg/net/#Dial" target="_blank" rel="noopener">net.Dial</a> for more information which networks are available.<br>In general you should use an Unix domain socket if available and TCP otherwise for best performance.</p>
<h4 id="Address"><a href="#Address" class="headerlink" title="Address"></a>Address</h4><p>For TCP and UDP networks, addresses have the form <code>host[:port]</code>.<br>If <code>port</code> is omitted, the default port will be used.<br>If <code>host</code> is a literal IPv6 address, it must be enclosed in square brackets.<br>The functions <a href="https://golang.org/pkg/net/#JoinHostPort" target="_blank" rel="noopener">net.JoinHostPort</a> and <a href="https://golang.org/pkg/net/#SplitHostPort" target="_blank" rel="noopener">net.SplitHostPort</a> manipulate addresses in this form.</p>
<p>For Unix domain sockets the address is the absolute path to the MySQL-Server-socket, e.g. <code>/var/run/mysqld/mysqld.sock</code> or <code>/tmp/mysql.sock</code>.</p>
<h4 id="Parameters"><a href="#Parameters" class="headerlink" title="Parameters"></a>Parameters</h4><p><em>Parameters are case-sensitive!</em></p>
<p>Notice that any of <code>true</code>, <code>TRUE</code>, <code>True</code> or <code>1</code> is accepted to stand for a true boolean value. Not surprisingly, false can be specified as any of: <code>false</code>, <code>FALSE</code>, <code>False</code> or <code>0</code>.</p>
<h5 id="allowAllFiles"><a href="#allowAllFiles" class="headerlink" title="allowAllFiles"></a><code>allowAllFiles</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Type:           bool</span><br><span class="line">Valid Values:   true, false</span><br><span class="line">Default:        false</span><br></pre></td></tr></table></figure>
<p><code>allowAllFiles=true</code> disables the file Whitelist for <code>LOAD DATA LOCAL INFILE</code> and allows <em>all</em> files.<br><a href="http://dev.mysql.com/doc/refman/5.7/en/load-data-local.html" target="_blank" rel="noopener"><em>Might be insecure!</em></a></p>
<h5 id="allowCleartextPasswords"><a href="#allowCleartextPasswords" class="headerlink" title="allowCleartextPasswords"></a><code>allowCleartextPasswords</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Type:           bool</span><br><span class="line">Valid Values:   true, false</span><br><span class="line">Default:        false</span><br></pre></td></tr></table></figure>
<p><code>allowCleartextPasswords=true</code> allows using the <a href="http://dev.mysql.com/doc/en/cleartext-authentication-plugin.html" target="_blank" rel="noopener">cleartext client side plugin</a> if required by an account, such as one defined with the <a href="http://dev.mysql.com/doc/en/pam-authentication-plugin.html" target="_blank" rel="noopener">PAM authentication plugin</a>. Sending passwords in clear text may be a security problem in some configurations. To avoid problems if there is any possibility that the password would be intercepted, clients should connect to MySQL Server using a method that protects the password. Possibilities include <a href="#tls">TLS / SSL</a>, IPsec, or a private network.</p>
<h5 id="allowNativePasswords"><a href="#allowNativePasswords" class="headerlink" title="allowNativePasswords"></a><code>allowNativePasswords</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Type:           bool</span><br><span class="line">Valid Values:   true, false</span><br><span class="line">Default:        true</span><br></pre></td></tr></table></figure>
<p><code>allowNativePasswords=false</code> disallows the usage of MySQL native password method.</p>
<h5 id="allowOldPasswords"><a href="#allowOldPasswords" class="headerlink" title="allowOldPasswords"></a><code>allowOldPasswords</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Type:           bool</span><br><span class="line">Valid Values:   true, false</span><br><span class="line">Default:        false</span><br></pre></td></tr></table></figure>
<p><code>allowOldPasswords=true</code> allows the usage of the insecure old password method. This should be avoided, but is necessary in some cases. See also <a href="https://github.com/go-sql-driver/mysql/wiki/old_passwords" target="_blank" rel="noopener">the old_passwords wiki page</a>.</p>
<h5 id="charset"><a href="#charset" class="headerlink" title="charset"></a><code>charset</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Type:           string</span><br><span class="line">Valid Values:   &lt;name&gt;</span><br><span class="line">Default:        none</span><br></pre></td></tr></table></figure>
<p>Sets the charset used for client-server interaction (<code>&quot;SET NAMES &lt;value&gt;&quot;</code>). If multiple charsets are set (separated by a comma), the following charset is used if setting the charset failes. This enables for example support for <code>utf8mb4</code> (<a href="http://dev.mysql.com/doc/refman/5.5/en/charset-unicode-utf8mb4.html" target="_blank" rel="noopener">introduced in MySQL 5.5.3</a>) with fallback to <code>utf8</code> for older servers (<code>charset=utf8mb4,utf8</code>).</p>
<p>Usage of the <code>charset</code> parameter is discouraged because it issues additional queries to the server.<br>Unless you need the fallback behavior, please use <code>collation</code> instead.</p>
<h5 id="collation"><a href="#collation" class="headerlink" title="collation"></a><code>collation</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Type:           string</span><br><span class="line">Valid Values:   &lt;name&gt;</span><br><span class="line">Default:        utf8_general_ci</span><br></pre></td></tr></table></figure>
<p>Sets the collation used for client-server interaction on connection. In contrast to <code>charset</code>, <code>collation</code> does not issue additional queries. If the specified collation is unavailable on the target server, the connection will fail.</p>
<p>A list of valid charsets for a server is retrievable with <code>SHOW COLLATION</code>.</p>
<h5 id="clientFoundRows"><a href="#clientFoundRows" class="headerlink" title="clientFoundRows"></a><code>clientFoundRows</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Type:           bool</span><br><span class="line">Valid Values:   true, false</span><br><span class="line">Default:        false</span><br></pre></td></tr></table></figure>
<p><code>clientFoundRows=true</code> causes an UPDATE to return the number of matching rows instead of the number of rows changed.</p>
<h5 id="columnsWithAlias"><a href="#columnsWithAlias" class="headerlink" title="columnsWithAlias"></a><code>columnsWithAlias</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Type:           bool</span><br><span class="line">Valid Values:   true, false</span><br><span class="line">Default:        false</span><br></pre></td></tr></table></figure>
<p>When <code>columnsWithAlias</code> is true, calls to <code>sql.Rows.Columns()</code> will return the table alias and the column name separated by a dot. For example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT u.id FROM users as u</span><br></pre></td></tr></table></figure>
<p>will return <code>u.id</code> instead of just <code>id</code> if <code>columnsWithAlias=true</code>.</p>
<h5 id="interpolateParams"><a href="#interpolateParams" class="headerlink" title="interpolateParams"></a><code>interpolateParams</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Type:           bool</span><br><span class="line">Valid Values:   true, false</span><br><span class="line">Default:        false</span><br></pre></td></tr></table></figure>
<p>If <code>interpolateParams</code> is true, placeholders (<code>?</code>) in calls to <code>db.Query()</code> and <code>db.Exec()</code> are interpolated into a single query string with given parameters. This reduces the number of roundtrips, since the driver has to prepare a statement, execute it with given parameters and close the statement again with <code>interpolateParams=false</code>.</p>
<p><em>This can not be used together with the multibyte encodings BIG5, CP932, GB2312, GBK or SJIS. These are blacklisted as they may <a href="http://stackoverflow.com/a/12118602/3430118" target="_blank" rel="noopener">introduce a SQL injection vulnerability</a>!</em></p>
<h5 id="loc"><a href="#loc" class="headerlink" title="loc"></a><code>loc</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Type:           string</span><br><span class="line">Valid Values:   &lt;escaped name&gt;</span><br><span class="line">Default:        UTC</span><br></pre></td></tr></table></figure>
<p>Sets the location for time.Time values (when using <code>parseTime=true</code>). <em>“Local”</em> sets the system’s location. See <a href="https://golang.org/pkg/time/#LoadLocation" target="_blank" rel="noopener">time.LoadLocation</a> for details.</p>
<p>Note that this sets the location for time.Time values but does not change MySQL’s <a href="https://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html" target="_blank" rel="noopener">time_zone setting</a>. For that see the <a href="#system-variables">time_zone system variable</a>, which can also be set as a DSN parameter.</p>
<p>Please keep in mind, that param values must be <a href="https://golang.org/pkg/net/url/#QueryEscape" target="_blank" rel="noopener">url.QueryEscape</a>‘ed. Alternatively you can manually replace the <code>/</code> with <code>%2F</code>. For example <code>US/Pacific</code> would be <code>loc=US%2FPacific</code>.</p>
<h5 id="maxAllowedPacket"><a href="#maxAllowedPacket" class="headerlink" title="maxAllowedPacket"></a><code>maxAllowedPacket</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Type:          decimal number</span><br><span class="line">Default:       4194304</span><br></pre></td></tr></table></figure>
<p>Max packet size allowed in bytes. The default value is 4 MiB and should be adjusted to match the server settings. <code>maxAllowedPacket=0</code> can be used to automatically fetch the <code>max_allowed_packet</code> variable from server <em>on every connection</em>.</p>
<h5 id="multiStatements"><a href="#multiStatements" class="headerlink" title="multiStatements"></a><code>multiStatements</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Type:           bool</span><br><span class="line">Valid Values:   true, false</span><br><span class="line">Default:        false</span><br></pre></td></tr></table></figure>
<p>Allow multiple statements in one query. While this allows batch queries, it also greatly increases the risk of SQL injections. Only the result of the first query is returned, all other results are silently discarded.</p>
<p>When <code>multiStatements</code> is used, <code>?</code> parameters must only be used in the first statement.</p>
<h5 id="parseTime"><a href="#parseTime" class="headerlink" title="parseTime"></a><code>parseTime</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Type:           bool</span><br><span class="line">Valid Values:   true, false</span><br><span class="line">Default:        false</span><br></pre></td></tr></table></figure>
<p><code>parseTime=true</code> changes the output type of <code>DATE</code> and <code>DATETIME</code> values to <code>time.Time</code> instead of <code>[]byte</code> / <code>string</code></p>
<h5 id="readTimeout"><a href="#readTimeout" class="headerlink" title="readTimeout"></a><code>readTimeout</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Type:           duration</span><br><span class="line">Default:        0</span><br></pre></td></tr></table></figure>
<p>I/O read timeout. The value must be a decimal number with a unit suffix (<em>“ms”</em>, <em>“s”</em>, <em>“m”</em>, <em>“h”</em>), such as <em>“30s”</em>, <em>“0.5m”</em> or <em>“1m30s”</em>.</p>
<h5 id="rejectReadOnly"><a href="#rejectReadOnly" class="headerlink" title="rejectReadOnly"></a><code>rejectReadOnly</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Type:           bool</span><br><span class="line">Valid Values:   true, false</span><br><span class="line">Default:        false</span><br></pre></td></tr></table></figure>
<p><code>rejectReadOnly=true</code> causes the driver to reject read-only connections. This<br>is for a possible race condition during an automatic failover, where the mysql<br>client gets connected to a read-only replica after the failover.</p>
<p>Note that this should be a fairly rare case, as an automatic failover normally<br>happens when the primary is down, and the race condition shouldn’t happen<br>unless it comes back up online as soon as the failover is kicked off. On the<br>other hand, when this happens, a MySQL application can get stuck on a<br>read-only connection until restarted. It is however fairly easy to reproduce,<br>for example, using a manual failover on AWS Aurora’s MySQL-compatible cluster.</p>
<p>If you are not relying on read-only transactions to reject writes that aren’t<br>supposed to happen, setting this on some MySQL providers (such as AWS Aurora)<br>is safer for failovers.</p>
<p>Note that ERROR 1290 can be returned for a <code>read-only</code> server and this option will<br>cause a retry for that error. However the same error number is used for some<br>other cases. You should ensure your application will never cause an ERROR 1290<br>except for <code>read-only</code> mode when enabling this option.</p>
<h5 id="timeout"><a href="#timeout" class="headerlink" title="timeout"></a><code>timeout</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Type:           duration</span><br><span class="line">Default:        OS default</span><br></pre></td></tr></table></figure>
<p>Timeout for establishing connections, aka dial timeout. The value must be a decimal number with a unit suffix (<em>“ms”</em>, <em>“s”</em>, <em>“m”</em>, <em>“h”</em>), such as <em>“30s”</em>, <em>“0.5m”</em> or <em>“1m30s”</em>.</p>
<h5 id="tls"><a href="#tls" class="headerlink" title="tls"></a><code>tls</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Type:           bool / string</span><br><span class="line">Valid Values:   true, false, skip-verify, &lt;name&gt;</span><br><span class="line">Default:        false</span><br></pre></td></tr></table></figure>
<p><code>tls=true</code> enables TLS / SSL encrypted connection to the server. Use <code>skip-verify</code> if you want to use a self-signed or invalid certificate (server side). Use a custom value registered with <a href="https://godoc.org/github.com/go-sql-driver/mysql#RegisterTLSConfig" target="_blank" rel="noopener"><code>mysql.RegisterTLSConfig</code></a>.</p>
<h5 id="writeTimeout"><a href="#writeTimeout" class="headerlink" title="writeTimeout"></a><code>writeTimeout</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Type:           duration</span><br><span class="line">Default:        0</span><br></pre></td></tr></table></figure>
<p>I/O write timeout. The value must be a decimal number with a unit suffix (<em>“ms”</em>, <em>“s”</em>, <em>“m”</em>, <em>“h”</em>), such as <em>“30s”</em>, <em>“0.5m”</em> or <em>“1m30s”</em>.</p>
<h5 id="System-Variables"><a href="#System-Variables" class="headerlink" title="System Variables"></a>System Variables</h5><p>Any other parameters are interpreted as system variables:</p>
<ul>
<li><code>&lt;boolean_var&gt;=&lt;value&gt;</code>: <code>SET &lt;boolean_var&gt;=&lt;value&gt;</code></li>
<li><code>&lt;enum_var&gt;=&lt;value&gt;</code>: <code>SET &lt;enum_var&gt;=&lt;value&gt;</code></li>
<li><code>&lt;string_var&gt;=%27&lt;value&gt;%27</code>: <code>SET &lt;string_var&gt;=&#39;&lt;value&gt;&#39;</code></li>
</ul>
<p>Rules:</p>
<ul>
<li>The values for string variables must be quoted with <code>&#39;</code>.</li>
<li>The values must also be <a href="http://golang.org/pkg/net/url/#QueryEscape" target="_blank" rel="noopener">url.QueryEscape</a>‘ed!<br>(which implies values of string variables must be wrapped with <code>%27</code>).</li>
</ul>
<p>Examples:</p>
<ul>
<li><code>autocommit=1</code>: <code>SET autocommit=1</code></li>
<li><a href="https://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html" target="_blank" rel="noopener"><code>time_zone=%27Europe%2FParis%27</code></a>: <code>SET time_zone=&#39;Europe/Paris&#39;</code></li>
<li><a href="https://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_tx_isolation" target="_blank" rel="noopener"><code>tx_isolation=%27REPEATABLE-READ%27</code></a>: <code>SET tx_isolation=&#39;REPEATABLE-READ&#39;</code></li>
</ul>
<h4 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user@unix(/path/to/socket)/dbname</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root:pw@unix(/tmp/mysql.sock)/myDatabase?loc=Local</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user:password@tcp(localhost:5555)/dbname?tls=skip-verify&amp;autocommit=true</span><br></pre></td></tr></table></figure>
<p>Treat warnings as errors by setting the system variable <a href="https://dev.mysql.com/doc/refman/5.7/en/sql-mode.html" target="_blank" rel="noopener"><code>sql_mode</code></a>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user:password@/dbname?sql_mode=TRADITIONAL</span><br></pre></td></tr></table></figure></p>
<p>TCP via IPv6:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user:password@tcp([de:ad:be:ef::ca:fe]:80)/dbname?timeout=90s&amp;collation=utf8mb4_unicode_ci</span><br></pre></td></tr></table></figure></p>
<p>TCP on a remote host, e.g. Amazon RDS:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id:password@tcp(your-amazonaws-uri.com:3306)/dbname</span><br></pre></td></tr></table></figure></p>
<p>Google Cloud SQL on App Engine (First Generation MySQL Server):<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user@cloudsql(project-id:instance-name)/dbname</span><br></pre></td></tr></table></figure></p>
<p>Google Cloud SQL on App Engine (Second Generation MySQL Server):<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user@cloudsql(project-id:regionname:instance-name)/dbname</span><br></pre></td></tr></table></figure></p>
<p>TCP using default port (3306) on localhost:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user:password@tcp/dbname?charset=utf8mb4,utf8&amp;sys_var=esc%40ped</span><br></pre></td></tr></table></figure></p>
<p>Use the default protocol (tcp) and host (localhost:3306):<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user:password@/dbname</span><br></pre></td></tr></table></figure></p>
<p>No Database preselected:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user:password@/</span><br></pre></td></tr></table></figure></p>
</div><div class="tags"><a href="/tags/mysql/">mysql</a><a href="/tags/golang/">golang</a></div><div class="post-nav"><a class="next" href="/2018/05/17/docker-openvpn/">docker-openvpn</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论（请确保 Disqus 可以正常加载）</button></div><script type="text/javascript">var disqus_config = function () {
    this.page.url = 'https://pescaria.github.io/2018/05/17/go-mysql-driver-data-source-name/';
    this.page.identifier = '2018/05/17/go-mysql-driver-data-source-name/';
    this.page.title = 'go-mysql-driver dataSourceName可选参数';
  };</script><script type="text/javascript" id="disqus-lazy-load-script">$.ajax({
url: 'https://disqus.com/next/config.json',
timeout: 2500,
type: 'GET',
success: function(){
  var d = document;
  var s = d.createElement('script');
  s.src = '//peep-1.disqus.com/embed.js';
  s.setAttribute('data-timestamp', + new Date());
  (d.head || d.body).appendChild(s);
  $('.disqus_click_btn').css('display', 'none');
},
error: function() {
  $('.disqus_click_btn').css('display', 'block');
}
});</script><script type="text/javascript" id="disqus-click-load">$('.btn_click_load').click(() => {  //click to load comments
    (() => { // DON'T EDIT BELOW THIS LINE
        var d = document;
        var s = d.createElement('script');
        s.src = '//peep-1.disqus.com/embed.js';
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();
    $('.disqus_click_btn').css('display','none');
});</script><script type="text/javascript" id="disqus-count-script">$(function() {
     var xhr = new XMLHttpRequest();
     xhr.open('GET', '//disqus.com/next/config.json', true);
     xhr.timeout = 2500;
     xhr.onreadystatechange = function () {
       if (xhr.readyState === 4 && xhr.status === 200) {
         $('.post-meta .post-comments-count').show();
         var s = document.createElement('script');
         s.id = 'dsq-count-scr';
         s.src = 'https://peep-1.disqus.com/count.js';
         s.async = true;
         (document.head || document.body).appendChild(s);
       }
     };
     xhr.ontimeout = function () { xhr.abort(); };
     xhr.send(null);
   });
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/DB/">DB</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/golang/">golang</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/golang/" style="font-size: 15px;">golang</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/blog/" style="font-size: 15px;">blog</a> <a href="/tags/drone/" style="font-size: 15px;">drone</a> <a href="/tags/CI-CD/" style="font-size: 15px;">CI,CD</a> <a href="/tags/gogs/" style="font-size: 15px;">gogs</a> <a href="/tags/https/" style="font-size: 15px;">https</a> <a href="/tags/ssh/" style="font-size: 15px;">ssh</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/05/17/go-mysql-driver-data-source-name/">go-mysql-driver dataSourceName可选参数</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/17/docker-openvpn/">docker-openvpn</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/14/hexo-github-pages/">利用用 hexo和 github pages 搭建个人博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/14/https-and-golang/">https and golang</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/15/drone-gogs/">利用 drone 和 gogs 搭建部署平台</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/05/16/ssh-login/">ssh登录相关</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/05/16/nginx-rtmp/">nginx rtmp</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//peep-1.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://program-think.blogspot.com/" title="编程随想" target="_blank">编程随想</a><ul></ul><a href="http://tonybai.com/" title="tonybai" target="_blank">tonybai</a><ul></ul><a href="http://colobu.com/" title="鸟窝" target="_blank">鸟窝</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Carl.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>